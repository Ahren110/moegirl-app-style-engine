/*! moegirl-app-style-engine 1.0.1 2015-02-12 */
$(function(){$(".mw-collapsible").each(function(){var a=$(this);if(!a.parents(".navbox").length){var b=a.find("> tbody> tr"),c=$('<div class="collapse-toggle"><span class="collapse-status-close">[展开]</span><span class="collapse-status-open">[折叠]</span></div>');c.on("click",function(){a.toggleClass("mw-collapsed")}),b.first().children().first().append(c)}})}),$(function(){var a=$('<nav id="moegirl-menu" />');a.on("touchstart",function(a){return $(a.target).closest("#moegirl-menu-list").length?void 0:!1}),$("body").append(a),a.append('<div id="moegirl-menu-title">'+$("h1").text()+"</div>");var b=$('<ol id="moegirl-menu-list" />');$("h2, h3, h4, h5").each(function(){var a=$(this);b.append($("<li />").text(a.text()).addClass("moegirl-menu-"+this.tagName.toLowerCase()).data("bind-element",a))}),b.on("click","li",function(){$("html, body").scrollTop($(this).data("bind-element").offset().top),$("body").toggleClass("moegirl-menu-show")}).on("touchstart",function(){var a=$(this).scrollTop(),b=this.scrollHeight-$(this).innerHeight();0>=a?$(this).scrollTop(1):a>=b&&$(this).scrollTop(b-1)}).appendTo(a);var c=$('<div id="moegirl-menu-mind-attack" />');c.on("touchstart",function(a){a.stopPropagation(),$("body").toggleClass("moegirl-menu-show")}),$("body").append(c),$("body").on("touchstart",function(){c.addClass("pause"),$(this).one("touchend",function(){c.removeClass("pause")})}),$(".mw-body").on("touchstart",function(){});var d=$('<div id="moegirl-menu-mask" />');d.on("touchstart",function(a){return $(a.target).is(this)&&$("body").removeClass("moegirl-menu-show"),!1}),$("body").append(d)}),$(function(){function a(a){var b=$(a).attr("style");if(b){var c=[];return b=b.split(";"),$.each(b,function(){this.length&&g.test(this)&&c.push(this)}),c.join(";")}}function b(c){c=$(c);var d={collapsible:!1,open:!0};if(c.is("table")){d.collapsible=c.is(".mw-collapsible"),d.open=c.is(".autocollapse")||c.is(".mw-uncollapsed");var e=c.find(">tbody>tr>.navbox-title");if(e.length){var f=e.find(">span:not(.mw-collapsible-toggle)"),g=f.children();if(g.find("small").length){var h=g.html().split("<br>");d.title=h[0],d.nav=$(h[1]).find("small").html()}else d.title=g.is("div")&&"text-align:center; line-height:10pt"==g.attr("style")?g.html():e.html()}var i=[];c.find(">tbody>tr").filter(function(){return!$(this).find(">.navbox-title").length&&"2px"!=$(this).css("height")}).each(function(){i.push(b(this))}),d.subgroup=i}else if(c.is("tr")){var e=c.find(">.navbox-group");if(e.length){var j=a(e);j&&(d.titleStyle=j);var k=e.children();d.title=k.is("div")&&"padding:0em 0.75em;"==k.attr("style")?k.html():e.html()}var e=c.find(">.navbox-list");if(e.length)if(e.find(">.navbox-subgroup").length){var l=b(e.find(">.navbox-subgroup"));d.subgroup=l.title?[l]:l.subgroup}else{var j=a(e);j&&(d.contentStyle=j),d.content=e.html()}var e=c.find(">.navbox-abovebelow");e.length&&(d.title=e.html())}return d}function c(a){a=$(a);var c={subgroup:b(a.find(">tbody>tr>td>.mw-collapsible"))};return c}function d(a,b){if(b.collapsible&&(a.addClass(h+"collapsible"),b.open&&a.addClass(h+"open")),b.title){var c=$('<div class="'+h+'title" />');if(c.html(b.title),a.append(c),b.titleStyle&&c.attr("style",b.titleStyle),b.collapsible&&c.append('<div class="'+h+'toggle"><span class="'+h+'status-close">[展开]</span><span class="'+h+'status-open">[折叠]</span></div>'),b.nav){var e=$('<div class="'+h+'nav" />');c.append(e),c.addClass(h+"has-nav"),e.html(b.nav)}}if(b.content||b.subgroup){var f=$('<div class="'+h+'content" />');if(a.append(f),b.content)b.contentStyle&&f.attr("style",b.contentStyle),f.html(b.content);else{var g=$('<div class="'+h+'subgroup" />').appendTo(f);$.each(b.subgroup,function(){d(g,this)})}}}function e(a){var b=$('<div class="'+h+'wrapper" />'),c=$('<div class="'+h+'subgroup" />');return b.append(c),d(c,a.subgroup),b}function f(a){var a=a||".navbox";$(a).each(function(){var a=$(this),b=c(a),d=e(b);d.bind("click",function(a){var b=$(a.target);b.parent().hasClass(h+"toggle")&&(b.closest("."+h+"collapsible").toggleClass(h+"open"),a.stopPropagation())}),a.after(d).hide()})}var g=/^\s*(background|color|font)/i,h="moegirl-flatten-navbox-";f()});